"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isInMobileBrowser = exports.checkAdapterState = exports.isInBrowser = void 0;
/**
 * check simply if current environment is browser or not
 * @returns boolean
 */
function isInBrowser() {
    return typeof window !== 'undefined' && typeof document !== 'undefined' && typeof navigator !== 'undefined';
}
exports.isInBrowser = isInBrowser;
/**
 *
 * @param {Function} check funcion to check if wallet is installed. return true if wallet is detected.
 * @returns
 */
function checkAdapterState(check) {
    if (!isInBrowser())
        return;
    const disposers = [];
    function dispose() {
        for (const dispose of disposers) {
            dispose();
        }
    }
    function checkAndDispose() {
        if (check()) {
            dispose();
        }
    }
    const interval = setInterval(checkAndDispose, 500);
    disposers.push(() => clearInterval(interval));
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', checkAndDispose, { once: true });
        disposers.push(() => document.removeEventListener('DOMContentLoaded', checkAndDispose));
    }
    if (document.readyState !== 'complete') {
        window.addEventListener('load', checkAndDispose, { once: true });
        disposers.push(() => window.removeEventListener('load', checkAndDispose));
    }
    checkAndDispose();
    // stop all task after 1min
    setTimeout(dispose, 60 * 1000);
}
exports.checkAdapterState = checkAdapterState;
/**
 * Simplily detect mobile device
 */
function isInMobileBrowser() {
    return (typeof navigator !== 'undefined' &&
        navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i));
}
exports.isInMobileBrowser = isInMobileBrowser;
//# sourceMappingURL=utils.js.map